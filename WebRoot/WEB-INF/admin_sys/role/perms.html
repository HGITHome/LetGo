<div class="perm-container">
    <#--图片处理权限-->
        <#assign
                imgPerms="/common/v_image_area_select.do,/common/o_image_cut.do,/common/o_upload_image.do"/>
        <#--默认有的权限，比如后台首页--><input type="hidden" name="perms"
                                   value="/index.do,/top.do,/main.do,/left.do,/right.do"/>

            <div class="perm-layout-1">
                <label><input value="/personal/" type="checkbox" name="perms"/>个人资料</label>
            </div>




            <div class="perm-layout-1">
                <label><input value="/frame/member" type="checkbox" name="perms"/>会员管理</label>
                <div class="perm-layout-2">
                    <label><input value="/member/" type="checkbox" name="perms"/>会员</label>
                    <label><input value="/member/log/" type="checkbox" name="perms"/>日志管理</label>
                </div>
            </div>

            <div class="perm-layout-1">
                <label><input value="/frame/finance/" type="checkbox" name="perms"/>财务管理</label>
                <div class="perm-layout-2">
                    <label><input value="/withdraw/" type="checkbox" name="perms"/>提现审核</label>
                    <label><input value="/recharge/" type="checkbox" name="perms"/>充值详情</label>
                </div>
            </div>


            <div class="perm-layout-1">
                <label><input value="/frame/admin/" type="checkbox" name="perms"/>用户管理</label>
                <div class="perm-layout-2">
                    <label><input value="/admin_global/" type="checkbox" name="perms"/>用户管理</label>
                    <label><input value="/role/" type="checkbox" name="perms"/>角色管理</label>
                    <label><input value="/log/" type="checkbox" name="perms"/>日志管理</label>
                </div>
            </div>

            <div class="perm-layout-1">
                <label><input value="/frame/admin/" type="checkbox" name="perms"/>好友关系</label>
                <div class="perm-layout-2">
                    <label><input value="/admin_global/" type="checkbox" name="perms"/>用户管理</label>
                    <label><input value="/role/" type="checkbox" name="perms"/>角色管理</label>
                    <label><input value="/log/" type="checkbox" name="perms"/>日志管理</label>
                </div>
            </div>

            <div class="perm-layout-1">
                <label><input value="/accusation/" type="checkbox" name="perms"/>红包管理</label>
                <div class="perm-layout-2">
                    <label><input value="/accusation/category" type="checkbox" name="perms"/>举报类别</label>
                    <label><input value="/accusation/v_list.do" type="checkbox" name="perms"/>举报列表</label>
                </div>
            </div>

            <div class="perm-layout-1">
                <label><input value="/frame/friendship/" type="checkbox" name="perms"/>好友管理</label>
                <div class="perm-layout-2">
                    <label><input value="/apply/" type="checkbox" name="perms"/>好友申请</label>
                    <label><input value="/friendship/" type="checkbox" name="perms"/>好友关系</label>
                </div>
            </div>

            <div class="perm-layout-1">
                <label><input value="/talk/" type="checkbox" name="perms"/>朋友圈管理</label>
            </div>

            <div class="perm-layout-1">
                <label><input value="/group/" type="checkbox" name="perms"/>群组管理</label>
            </div>


            <div class="perm-layout-1">
                <label><input value="/redEnvolope/" type="checkbox" name="perms"/>红包管理</label>
            </div>

            <div class="perm-layout-1">
                <label><input value="/apk/" type="checkbox" name="perms"/>apk管理</label>
            </div>

            <div class="perm-layout-1">
                <label><input value="/summary/" type="checkbox" name="perms"/>数据统计</label>
            </div>

            <div class="perm-layout-1">
                <label><input value="/data/" type="checkbox" name="perms"/>数据库维护</label>
            </div>


</div>
<script type="text/javascript">
    $(function () {
        $(".perm-container input[type=checkbox]").bind("click", function () {
            parentCheck(this);

        });
    });
    function parentCheck(chk) {
        var obj = $(chk).parent().parent().parent().parent().parent();
        var shouldClickChild = true;
        while (obj && obj.attr("class").indexOf("perm-container") == -1) {
            if (chk.checked) {
                $(obj.children()[0]).children().children().children().attr("checked", "checked");
                $(obj.children()[0]).children().children().attr("class", "checked");
            }
            shouldClickChild = false;
            obj = obj.parent();
        }
        if (shouldClickChild) {
            childCheck(chk);
        }
    }
    function childCheck(chk) {
        /* $(chk).parent().parent().parent().next().children().find("input[type=checkbox]").each(function(){
         this.checked=chk.checked
         }); */
        $(chk).parent().parent().parent().next().children().find("input[type=checkbox]").each(function () {
            if (chk.checked) {
                /* $(this).attr("checked","checked"); */
                $(this).attr("checked", true);
                $(this).parent().attr("class", "checked");
            } else {
                $(this).removeAttr("checked");
                $(this).parent().removeAttr("class");

            }
        });
    }
</script>
